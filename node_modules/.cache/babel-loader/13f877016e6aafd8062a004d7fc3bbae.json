{"ast":null,"code":"var _jsxFileName = \"/Users/gyume/mtatib/react/mtatib-react/src/Options.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\n// import { options } from \"nodemon/lib/config\";\nimport React from \"react\"; // import \"./tibDB\"\n\nimport { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst locationPermission = false;\nlet globalLat, globalLon;\nconst stopIds = [];\nlet mStation = {};\nlet currentStation = '';\n/**\n * \n * // locDBArr <- get this from the console log from where we get to know what name for locDb[name] went wrong\n// collectorArr <- get this from network tab collector-otp... aka url is requested to https://collector-otp-prod.camsys-apps.com/schedule/MTASBWY/stopsForRoute?apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP&&routeId=MTASBWY:${line}`\nit = 0; v ='';\nfor(i in locDBArr){\n    console.log(`\"${collectorArr[it].stopName}\": [${locDBArr[i]}]`, collectorArr[it].stopName, i);\n    it++;\n} //here confirm that the indexing order of these two arr are the same\n\nit = 0; v ='';\nfor(i in locDBArr){\n    v += `\"${collectorArr[it].stopName}\": [${locDBArr[i]}],\\n`;\n    it++;\n}\n */\n\nlet disabled_ids = [];\nexport const back = () => {\n  document.getElementById(\"back\").style.display = 'none';\n  console.log(currentStation);\n  currentStation.style.display = 'none';\n  let options = document.querySelector(\".options\").children;\n\n  for (let i = 0; i < options.length; i++) options[i].style.display = 'block'; //document.querySelector('img[onclick=\"playnavigation()\"]').style.display = '';\n  //document.querySelector('img[onclick=\"playnavigation()\"]').style.animation = '';\n\n\n  while (disabled_ids.length != 0) {\n    document.getElementById(disabled_ids.pop()).style.display = \"block\";\n  }\n};\n\nfunction sleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nfunction GetClosestStation(props) {\n  _s();\n\n  const [allLocs, setAllLocs] = useState([]);\n  const [allLines, setAllLines] = useState([]);\n  const [allBusLocs, setAllBusLocs] = useState([]); // const [options_p_Arr, setOptions_p_Arr] = useState([]);\n\n  let home_lat = 40.73671957818318,\n      home_lon = -73.87569054132567;\n  useEffect(() => {\n    (async () => {\n      let x = await fetch(\"https://gyurmay.github.io/mtatib/locDb2/allLocs.json\");\n      let allLocs1 = await x.json();\n      setAllLocs(allLocs1);\n      x = await fetch(\"https://gyurmay.github.io/mtatib/locDb2/allLines.json\");\n      let allLines1 = await x.json();\n      setAllLines(allLines1);\n      x = await fetch(\"https://gyurmay.github.io/mtatib/locDb2/allLocsBus.json\");\n      let allLocs2 = await x.json();\n      setAllBusLocs(allLocs2);\n    })();\n  }, []); // useEffect(() => {\n  // let [lat, lon] = [40.6980331, -73.806328];\n\n  let [lat, lon] = [home_lat, home_lon]; // let lat=40.6980331 lon=-73.806328;\n\n  let myloc = [];\n  myloc[0] = lat;\n  console.log(lat);\n  myloc[1] = lon;\n  let num = allLocs; // store [lat,lon] for all given\n\n  let d_arr = {}; // stationName/ p[id]\n\n  let d_arr_cop = []; //distances\n\n  let j;\n\n  for (j = 0; j < allLocs.length; j++) {\n    //logging the distances of the stations with increment j for objects\n    let distance = Math.sqrt((num[j][\"loc\"][0] - myloc[0]) * (num[j][\"loc\"][0] - myloc[0]) + (num[j][\"loc\"][1] - myloc[1]) * (num[j][\"loc\"][1] - myloc[1]));\n    console.log(\"from home to \" + num[j].name + \". distance: \" + distance);\n    d_arr[distance] = num[j].name; //input distance get the station Id\n\n    d_arr_cop[j] = distance;\n  }\n\n  let num2 = allBusLocs;\n\n  for (let k = 0; k < allBusLocs.length; k++) {\n    for (j = 0; j < allBusLocs[k].length; j++) {\n      // logging the distances of the bus Stations with increment j for objects\n      let distance = Math.sqrt((num2[k][j][\"lat\"] - myloc[0]) * (num2[k][j][\"lat\"] - myloc[0]) + (num2[k][j][\"lon\"] - myloc[1]) * (num2[k][j][\"lon\"] - myloc[1]));\n      console.log(\"from home to \" + num2[k][j].name + \". distance: \" + distance);\n      d_arr[distance] = num2[k][j].name; // input distance get the station Id\n\n      d_arr_cop[j] = distance;\n      mStation[num2[k][j].name] = num2[k][j].id;\n    }\n  }\n\n  let options_p_Arr = []; // useEffect(() => { \n\n  console.log(\"Before sorting\", d_arr_cop);\n  d_arr_cop.sort((a, b) => {\n    return a - b;\n  });\n  d_arr_cop = [...new Set(d_arr_cop)];\n  console.log(\"After insertion\", d_arr_cop); // new Promise((resolve) => setTimeout(resolve, 1000));\n  // }, []);\n  // setTimeout(() => {\n  // let it=0;\n  // d_arr_cop.forEach(x => {\n\n  let x;\n  let numOptions = 10; // how many stations stops do we want to show?\n\n  for (let i = 0; i < numOptions; i++) {\n    x = d_arr_cop[i];\n    let name = d_arr[x];\n    console.log(\"ballll\", d_arr_cop);\n    console.log(\"closest\", d_arr[d_arr_cop[0]]);\n    let line; // let line = (allLines.find(x => x.stopName === name) !== undefined ? 'UN' : allLines.find(x => x.stopName === name).routeId.slice(-1));\n\n    let xaFound = false;\n\n    for (let j = 0; j < allLines.length; j++) {\n      x = allLines[j];\n      let xa = x.find(y => y.stopName === name);\n      x.forEach(y => {\n        mStation[y.stopName] = y.stopId;\n      });\n\n      if (xa !== undefined && !xaFound) {\n        line = xa.routeId.slice(-1);\n        xaFound = true;\n      }\n    }\n\n    if (!xaFound) {\n      let a = allBusLocs;\n      let lines = [];\n\n      for (let k = 0; k < a.length; k++) {\n        let xa = a[k].findIndex(y => y.name === name);\n        console.log(\"xa\", xa);\n\n        if (xa !== -1) {\n          a[k][xa].routes.forEach(y => {\n            line = y.id.includes(\"NYCT\") ? y.shortName : '';\n\n            if (line !== '') {\n              console.log(\"the lineName/busName found::\", line);\n              lines.push(line);\n            } else {\n              console.log(\"bus isn't NYCT bus\");\n            }\n          });\n        }\n      }\n\n      line = lines.join(\" | \");\n    } // for(let j=0;j<num2.length;j++){\n    //     x = allLines[j];\n    //     let xa = x.find(y => y.stopName === name);\n    //     x.forEach(y => { \n    //         mStation[y.stopName] = y.stopId; \n    //     })\n    // }\n    // console.log(JSON.stringify())\n\n\n    let img;\n\n    if (line.length > 1 || line === undefined) {\n      img = line + \" | \";\n    } else {\n      img = /*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"https://new.mta.info/themes/custom/bootstrap_mta/images/icons/\" + line + \".svg\",\n        style: {\n          height: '1em',\n          padding: '1px 0 2px 3px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 24\n      }, this);\n    } // img = (<img src={\"https://new.mta.info/themes/custom/bootstrap_mta/images/icons/\"+line+\".svg\"} style={{height:'1em', padding:'1px 0 2px 3px'}} />);\n\n\n    options_p_Arr.push( /*#__PURE__*/_jsxDEV(\"p\", {\n      id: name,\n      style: {\n        display: 'flex',\n        alignItems: 'center'\n      },\n      onClick: () => loadSchedulePage(mStation[name], name),\n      children: [img, name]\n    }, name, true, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }, this));\n  }\n\n  ; // }, []);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: options_p_Arr\n  }, void 0, false); // }, 1000); //wait one sec for sort() function to take place\n  // })();\n  // }, []);\n  // }, []);\n}\n\n_s(GetClosestStation, \"/H1+p/GNXVkWn5tEMDdkGvEu2qs=\");\n\n_c = GetClosestStation;\n\nconst tibetanName = engName => {\n  return engName;\n};\n\nconst schedulevisible = stationName => {\n  let id = stationName;\n  console.log(\"times is w/ id:\" + id);\n  let times = document.getElementById(id);\n  currentStation = times;\n  times.style.display = 'block';\n  let options = document.querySelector(\".options\").children;\n\n  for (let i = 0; i < options.length; i++) options[i].style.display = 'none';\n\n  document.getElementById(\"back\").style.display = 'block'; //document.querySelector('img[onclick=\"playnavigation()\"]').style.display = 'none';\n  // navigation.pause();\n  // navigation.currentTime = 0;\n};\n\nconst loadSchedulePage = (line, name) => {\n  // const [jsonResp, setJsonResp] = useState([]); \n  console.log(\"mStation\", mStation);\n  let url = `https://otp-mta-prod.camsys-apps.com/otp/routers/default/nearby?stops=${line}&apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE`;\n  let jr = []; // jsonResponse\n\n  (async () => {\n    const resp = await fetch(url);\n    const data = await resp.json();\n    jr = data[0]; // prompt(\"\",JSON.stringify(jr));\n\n    if (document.getElementById(name + '-time') != null) document.getElementById(name + '-time').remove(); //remove old -time if exist\n\n    let stations = document.createElement('p'); //select divId(<p></p>) box\n\n    stations.style.display = 'none';\n    let stationName = document.createElement('div');\n    stationName.innerHTML += '<b>' + name + '</b><br/><br/>';\n    stations.append(stationName);\n    stations.id = name + '-time'; // stations.innerHTML += `<button id=\"go\" style=\"position: relative;padding: 2em;font-size: 50%;left: 27%;background: teal;color: #fff; bottom: 1em;border: 5px solid white;border-radius: 7%;box-shadow: 4px 3px 0.5em black;\">Go Here</button>`;\n    //showTrainTimes();\n\n    let table = document.createElement('table');\n    table.id = \"times\";\n    let shortNames = [],\n        headsigns = [],\n        arrivalTimes = [];\n\n    for (let i = 0; i < jr['groups'].length; i++) {\n      //loop over each route (train Lines)\n      shortNames[i] = jr['groups'][i]['route']['shortName'];\n      headsigns[i] = jr['groups'][i]['headsign'];\n      let numberOfTrains = jr['groups'][i]['times'].length;\n\n      for (let j = 0; j < numberOfTrains; j++) {\n        //get arrival times rows\n        let tr = document.createElement('tr');\n        table.appendChild(tr);\n        tr.innerHTML += `<td><img src='https://new.mta.info/themes/custom/bootstrap_mta/images/icons/${shortNames[i]}.svg'></td>`;\n        tr.innerHTML += '<td>' + tibetanName(headsigns[i]) + '</td>'; //Print HeadSigns (which side is it going)\n\n        let d = new Date(jr['groups'][i]['times'][j]['arrivalFmt']);\n        let h = d.getHours() > 12 ? d.getHours() - 12 : d.getHours();\n        if (h == 0) h = 12;\n        let amPm = d.getHours() > 12 ? 'PM' : 'AM';\n        arrivalTimes[j] = h + ':' + d.getMinutes() + amPm;\n        console.log(\"(new Date()).getHours(): \" + new Date().getHours() + \" > d.getHours(): \" + d.getHours());\n        tr.innerHTML += `<td style='font-size:60%;'>${new Date().getHours() == d.getHours() ? d.getMinutes() - new Date().getMinutes() : 60 - new Date().getMinutes() + d.getMinutes()} min</td>`;\n      }\n\n      document.body.appendChild(stations);\n    }\n\n    stations.appendChild(table);\n    document.getElementById(\"load_icon\").style.display = \"none\";\n    schedulevisible(name + \"-time\");\n  })();\n\n  document.getElementById(\"load_icon\").style.display = \"block\";\n};\n\nconst LoadMainPage = props => {\n  _s2();\n\n  // document.querySelector('#loadLocDb').src = \"https://gyurmay.github.io/mtatib/locDb2/\" + (new URLSearchParams(window.location.search).get('line')) + \".js\";\n  const line = props.line;\n  let url = `https://collector-otp-prod.camsys-apps.com/schedule/MTASBWY/stopsForRoute?apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP&&routeId=MTASBWY:${line}`;\n  const [jsonResp, setJsonResp] = useState([]);\n  const [locDb, setLocDb] = useState([]); // const [lat, setLat] = useState();\n  // const [lon, setLon] = useState();\n  // const [mStation, setmStation] = useState({});\n\n  const options_p_Arr = [];\n  useEffect(() => {\n    (async () => {\n      let url2 = \"https://gyurmay.github.io/mtatib/locDb2/\" + new URLSearchParams(document.location.search).get('line') + \".json\"; // let url2 = \"/R.json\";\n\n      const locResp = await fetch(url2);\n      const locData = await locResp.json();\n      setLocDb(locData); // document.write(JSON.stringify(locData))\n\n      const resp = await fetch(url); //Whitehall here but in Loc2DB its \"whitehall st - somthing\".. so making a include instead\n\n      const data = await resp.json();\n      setJsonResp(data);\n      setGeoLocationPermission();\n    })();\n  }, []);\n  jsonResp.forEach(i => {\n    let name = i.stopName; // setLat(locDb); \n    // setLon(locDb[name][1]);\n\n    console.log(JSON.stringify(locDb)); //   setmStation(arr => [...arr, \"\"]);\n\n    mStation[name] = i[\"stopId\"];\n    console.log(`name no work for ${name}`);\n    console.log(`Inserting ${name} with longitude: ${locDb[name][0]}`); //   if(name.includes(\"Center\")) name.replace(/Center/g,\"Ctr\");\n\n    options_p_Arr.push( /*#__PURE__*/_jsxDEV(\"p\", {\n      id: name,\n      lon: locDb[name][0],\n      lat: locDb[name][1],\n      onClick: () => loadSchedulePage(mStation[name], name),\n      children: name\n    }, name, false, {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 26\n    }, this));\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: options_p_Arr\n    }, void 0, false)\n  }, void 0, false);\n};\n\n_s2(LoadMainPage, \"Q/LJxDFPXbNcKQakgD3Mz35fY0g=\");\n\n_c2 = LoadMainPage;\n\nconst setGeoLocationPermission = () => {// navigator.geolocation.getCurrentPosition(position => {\n  //     globalLat = position.coords.latitude;\n  //     globalLon = position.coords.longitude;\n  //     locationPermission = true;\n  //     getClosestStation(globalLat, globalLon);\n  //     let lenny = options[0].childElementCount;\n  //     for(let incre=0; incre<lenny; incre++){\n  //         options[0].appendChild(document.getElementById(d_arr[d_arr_cop[incre]]));\n  //     }\n  // });\n};\n\nconst Options = props => {\n  const urlParams = new URLSearchParams(window.location.search);\n\n  let options = /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"options\",\n      children: /*#__PURE__*/_jsxDEV(LoadMainPage, {\n        line: urlParams.get('line')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n\n  if (urlParams.get(\"selectLines\") === \"t\") {\n    options = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"options\",\n      children: /*#__PURE__*/_jsxDEV(GetClosestStation, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 13\n    }, this);\n  }\n\n  return options;\n};\n\n_c3 = Options;\nexport default Options;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"GetClosestStation\");\n$RefreshReg$(_c2, \"LoadMainPage\");\n$RefreshReg$(_c3, \"Options\");","map":{"version":3,"names":["React","useState","useEffect","locationPermission","globalLat","globalLon","stopIds","mStation","currentStation","disabled_ids","back","document","getElementById","style","display","console","log","options","querySelector","children","i","length","pop","sleep","ms","Promise","resolve","setTimeout","GetClosestStation","props","allLocs","setAllLocs","allLines","setAllLines","allBusLocs","setAllBusLocs","home_lat","home_lon","x","fetch","allLocs1","json","allLines1","allLocs2","lat","lon","myloc","num","d_arr","d_arr_cop","j","distance","Math","sqrt","name","num2","k","id","options_p_Arr","sort","a","b","Set","numOptions","line","xaFound","xa","find","y","stopName","forEach","stopId","undefined","routeId","slice","lines","findIndex","routes","includes","shortName","push","join","img","height","padding","alignItems","loadSchedulePage","tibetanName","engName","schedulevisible","stationName","times","url","jr","resp","data","remove","stations","createElement","innerHTML","append","table","shortNames","headsigns","arrivalTimes","numberOfTrains","tr","appendChild","d","Date","h","getHours","amPm","getMinutes","body","LoadMainPage","jsonResp","setJsonResp","locDb","setLocDb","url2","URLSearchParams","location","search","get","locResp","locData","setGeoLocationPermission","JSON","stringify","Options","urlParams","window"],"sources":["/Users/gyume/mtatib/react/mtatib-react/src/Options.js"],"sourcesContent":["// import { options } from \"nodemon/lib/config\";\nimport React from \"react\"\n// import \"./tibDB\"\nimport {useState, useEffect} from \"react\"\n\nconst locationPermission = false;\nlet globalLat, globalLon;\nconst stopIds = [];\nlet mStation = {};\nlet currentStation = '';\n\n/**\n * \n * // locDBArr <- get this from the console log from where we get to know what name for locDb[name] went wrong\n// collectorArr <- get this from network tab collector-otp... aka url is requested to https://collector-otp-prod.camsys-apps.com/schedule/MTASBWY/stopsForRoute?apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP&&routeId=MTASBWY:${line}`\nit = 0; v ='';\nfor(i in locDBArr){\n    console.log(`\"${collectorArr[it].stopName}\": [${locDBArr[i]}]`, collectorArr[it].stopName, i);\n    it++;\n} //here confirm that the indexing order of these two arr are the same\n\nit = 0; v ='';\nfor(i in locDBArr){\n    v += `\"${collectorArr[it].stopName}\": [${locDBArr[i]}],\\n`;\n    it++;\n}\n */\n\nlet disabled_ids = [];\nexport const back = () => {\n    document.getElementById(\"back\").style.display = 'none';\n    console.log(currentStation)\n    currentStation.style.display = 'none';\n    let options = document.querySelector(\".options\").children;\n    for(let i=0;i<options.length;i++)\n        options[i].style.display = 'block';\n    //document.querySelector('img[onclick=\"playnavigation()\"]').style.display = '';\n    //document.querySelector('img[onclick=\"playnavigation()\"]').style.animation = '';\n  \n    while(disabled_ids.length != 0){\n        document.getElementById(disabled_ids.pop()).style.display = \"block\";\n    }\n}\n function sleep(ms) {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\nfunction GetClosestStation(props){\n    const [allLocs, setAllLocs] = useState([]);\n    const [allLines, setAllLines] = useState([]);\n    const [allBusLocs, setAllBusLocs] = useState([]);\n    // const [options_p_Arr, setOptions_p_Arr] = useState([]);\n    \n    let home_lat = 40.73671957818318, home_lon = -73.87569054132567;\n\n    useEffect(() => {\n        (async() => {\n\n            let x = await fetch(\"https://gyurmay.github.io/mtatib/locDb2/allLocs.json\");\n            let allLocs1 = (await x.json());\n            setAllLocs(allLocs1);\n\n            x = await fetch(\"https://gyurmay.github.io/mtatib/locDb2/allLines.json\");\n            let allLines1 = (await x.json());\n            setAllLines(allLines1);\n\n            x = await fetch(\"https://gyurmay.github.io/mtatib/locDb2/allLocsBus.json\");\n            let allLocs2 = (await x.json());\n            setAllBusLocs(allLocs2);\n            \n        })();\n    }, []);\n\n// useEffect(() => {\n    // let [lat, lon] = [40.6980331, -73.806328];\n    let [lat, lon] = [home_lat, home_lon]\n    // let lat=40.6980331 lon=-73.806328;\n    let myloc = [];\n    myloc[0] = lat; console.log(lat);\n    myloc[1] = lon;\n    let num = allLocs; // store [lat,lon] for all given\n\n    let d_arr = {}; // stationName/ p[id]\n    let d_arr_cop = []; //distances\n    let j;\n    \n    for(j=0;j<allLocs.length;j++){ //logging the distances of the stations with increment j for objects\n        let distance = Math.sqrt((((num[j][\"loc\"][0] - myloc[0])*(num[j][\"loc\"][0] - myloc[0])) + (num[j][\"loc\"][1] - myloc[1])*(num[j][\"loc\"][1] - myloc[1])));\n        console.log(\"from home to \"+ num[j].name + \". distance: \"+distance);\n        d_arr[distance] = num[j].name; //input distance get the station Id\n        d_arr_cop[j] = distance;\n    }\n\n    let num2 = allBusLocs;\n    for(let k=0;k<allBusLocs.length;k++){\n        for(j=0;j<allBusLocs[k].length;j++){ // logging the distances of the bus Stations with increment j for objects\n            let distance = Math.sqrt((((num2[k][j][\"lat\"] - myloc[0])*(num2[k][j][\"lat\"] - myloc[0])) + (num2[k][j][\"lon\"] - myloc[1])*(num2[k][j][\"lon\"] - myloc[1])));\n            console.log(\"from home to \"+ num2[k][j].name + \". distance: \"+distance);\n            d_arr[distance] = num2[k][j].name; // input distance get the station Id\n            d_arr_cop[j] = distance;\n            mStation[num2[k][j].name] = num2[k][j].id;\n        }\n    }\n    \n \n    let options_p_Arr = [];\n    // useEffect(() => { \n        console.log(\"Before sorting\", d_arr_cop);\n        d_arr_cop.sort((a,b) => {\n            return a-b;\n        });\n        d_arr_cop = [...new Set(d_arr_cop)];\n        console.log(\"After insertion\", d_arr_cop);\n        // new Promise((resolve) => setTimeout(resolve, 1000));\n        // }, []);\n\n\n    // setTimeout(() => {\n        // let it=0;\n        // d_arr_cop.forEach(x => {\n        let x;\n        let numOptions = 10; // how many stations stops do we want to show?\n        for(let i=0;i<numOptions; i++){ \n            x = d_arr_cop[i];  \n            let name = d_arr[x];\n            console.log(\"ballll\",d_arr_cop)\n            console.log(\"closest\", d_arr[d_arr_cop[0]]);\n            let line;\n            // let line = (allLines.find(x => x.stopName === name) !== undefined ? 'UN' : allLines.find(x => x.stopName === name).routeId.slice(-1));\n            let xaFound = false;\n            for(let j=0;j<allLines.length;j++){\n                x = allLines[j];\n                let xa = x.find(y => y.stopName === name);\n                x.forEach(y => { \n                    mStation[y.stopName] = y.stopId;\n                })\n                if(xa !== undefined && !xaFound){\n                    line = xa.routeId.slice(-1);\n                    xaFound = true;\n                }\n            }\n            if(!xaFound){\n                let a = allBusLocs;\n                let lines = [];\n                for(let k=0;k<a.length;k++){\n                    let xa = a[k].findIndex(y => y.name === name);\n                    console.log(\"xa\", xa);\n                    if(xa !== -1){\n                        a[k][xa].routes.forEach(y => {\n                                line = y.id.includes(\"NYCT\") ? y.shortName : '';\n                                if(line !== ''){\n                                    console.log(\"the lineName/busName found::\", line);\n                                    lines.push(line);\n                                }else{ console.log(\"bus isn't NYCT bus\")}\n                            });\n                    }\n                }\n                line = lines.join(\" | \");\n            }\n\n            // for(let j=0;j<num2.length;j++){\n            //     x = allLines[j];\n            //     let xa = x.find(y => y.stopName === name);\n            //     x.forEach(y => { \n            //         mStation[y.stopName] = y.stopId; \n            //     })\n                \n            // }\n\n            // console.log(JSON.stringify())\n            let img;\n            if(line.length > 1 || line === undefined){\n                img = line+\" | \";\n            }else{\n                img = (<img src={\"https://new.mta.info/themes/custom/bootstrap_mta/images/icons/\"+line+\".svg\"} style={{height:'1em', padding:'1px 0 2px 3px'}} />);\n            }\n            // img = (<img src={\"https://new.mta.info/themes/custom/bootstrap_mta/images/icons/\"+line+\".svg\"} style={{height:'1em', padding:'1px 0 2px 3px'}} />);\n            options_p_Arr.push(\n            <p id={name} style={{display:'flex', alignItems:'center'}} key={name} onClick={() => loadSchedulePage(mStation[name], name)}>\n                {img}\n                {name}\n            </p>);\n        };\n        // }, []);\n        return (<>{options_p_Arr}</>);\n            // }, 1000); //wait one sec for sort() function to take place\n        // })();\n    // }, []);\n    // }, []);\n}\n\nconst tibetanName = (engName) => {\n    return engName;\n};\nconst schedulevisible = (stationName) => {\n    let id = stationName;\n    console.log(\"times is w/ id:\" + id);\n    let times = document.getElementById(id);\n    currentStation = times;\n    times.style.display = 'block';\n    let options = document.querySelector(\".options\").children;\n    for(let i=0;i<options.length;i++)\n        options[i].style.display = 'none';\n    document.getElementById(\"back\").style.display = 'block';\n    //document.querySelector('img[onclick=\"playnavigation()\"]').style.display = 'none';\n    // navigation.pause();\n    // navigation.currentTime = 0;\n}\nconst loadSchedulePage = (line, name) => {\n    // const [jsonResp, setJsonResp] = useState([]); \n    console.log(\"mStation\", mStation);\n    let url = `https://otp-mta-prod.camsys-apps.com/otp/routers/default/nearby?stops=${line}&apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE`;\n    let jr = []; // jsonResponse\n\n    (async () => {\n        const resp = await fetch(url);\n        const data = await resp.json();\n        jr = data[0];\n        // prompt(\"\",JSON.stringify(jr));\n        \n        if(document.getElementById(name+'-time') != null) document.getElementById(name+'-time').remove(); //remove old -time if exist\n        let stations = document.createElement('p'); //select divId(<p></p>) box\n        stations.style.display = 'none';\n        let stationName = document.createElement('div');\n        stationName.innerHTML += '<b>'+name+'</b><br/><br/>';\n        stations.append(stationName);\n        stations.id = name+'-time';\n        // stations.innerHTML += `<button id=\"go\" style=\"position: relative;padding: 2em;font-size: 50%;left: 27%;background: teal;color: #fff; bottom: 1em;border: 5px solid white;border-radius: 7%;box-shadow: 4px 3px 0.5em black;\">Go Here</button>`;\n        //showTrainTimes();\n        let table = document.createElement('table');\n        table.id = \"times\";\n        let shortNames = [], headsigns = [], arrivalTimes = [];\n        \n        for(let i=0; i<jr['groups'].length; i++){ //loop over each route (train Lines)\n            shortNames[i] = jr['groups'][i]['route']['shortName'];\n            headsigns[i] = jr['groups'][i]['headsign'];\n            let numberOfTrains = jr['groups'][i]['times'].length;\n            for(let j=0; j<numberOfTrains; j++){ //get arrival times rows\n                let tr = document.createElement('tr');\n                table.appendChild(tr);\n                tr.innerHTML += (`<td><img src='https://new.mta.info/themes/custom/bootstrap_mta/images/icons/${shortNames[i]}.svg'></td>`);\n                tr.innerHTML += '<td>'+tibetanName(headsigns[i])+'</td>'; //Print HeadSigns (which side is it going)\n                let d = new Date(jr['groups'][i]['times'][j]['arrivalFmt']);\n                let h = (d.getHours() > 12) ?  d.getHours() - 12 : d.getHours();\n                if(h == 0) h = 12;\n                let amPm = (d.getHours() > 12) ? 'PM' : 'AM';\n                arrivalTimes[j] =  h+':'+d.getMinutes()+amPm;\n                console.log(\"(new Date()).getHours(): \" + (new Date()).getHours() + \" > d.getHours(): \" + d.getHours());\n                tr.innerHTML += (`<td style='font-size:60%;'>${((new Date()).getHours() == (d.getHours())) ? (d.getMinutes() - (new Date()).getMinutes()) : ( (60 - (new Date()).getMinutes()) + d.getMinutes() ) } min</td>`);\n            }\n\n        document.body.appendChild(stations);\n        }\n        stations.appendChild(table);\n        document.getElementById(\"load_icon\").style.display = \"none\";\n        schedulevisible(name+\"-time\");\n\n    })();\n\n    document.getElementById(\"load_icon\").style.display = \"block\";\n}\n\nconst LoadMainPage = props => {\n    // document.querySelector('#loadLocDb').src = \"https://gyurmay.github.io/mtatib/locDb2/\" + (new URLSearchParams(window.location.search).get('line')) + \".js\";\n    const line = props.line;\n    let url = `https://collector-otp-prod.camsys-apps.com/schedule/MTASBWY/stopsForRoute?apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP&&routeId=MTASBWY:${line}`;\n    \n    const [jsonResp, setJsonResp] = useState([]);\n    const [locDb, setLocDb] = useState([]);\n    // const [lat, setLat] = useState();\n    // const [lon, setLon] = useState();\n    // const [mStation, setmStation] = useState({});\n\n    const options_p_Arr = [];\n    useEffect(() => {\n        (async () => {\n            let url2 = \"https://gyurmay.github.io/mtatib/locDb2/\" + (new URLSearchParams(document.location.search).get('line')) + \".json\";\n            // let url2 = \"/R.json\";\n            const locResp = await fetch(url2);\n            const locData = await locResp.json();\n            setLocDb(locData);\n            // document.write(JSON.stringify(locData))\n\n            const resp = await fetch(url); //Whitehall here but in Loc2DB its \"whitehall st - somthing\".. so making a include instead\n            const data = await resp.json();\n            setJsonResp(data);\n\n            setGeoLocationPermission();\n        })();\n    }, []);\n    jsonResp.forEach(i => {\n      let name = i.stopName;\n      // setLat(locDb); \n      // setLon(locDb[name][1]);\n      console.log(JSON.stringify(locDb))\n    //   setmStation(arr => [...arr, \"\"]);\n      mStation[name] = i[\"stopId\"];\n      console.log(`name no work for ${name}`)\n      console.log(`Inserting ${name} with longitude: ${locDb[name][0]}`);\n    //   if(name.includes(\"Center\")) name.replace(/Center/g,\"Ctr\");\n      options_p_Arr.push(<p id={name} lon={locDb[name][0]} lat={locDb[name][1]} key={name} onClick={() => loadSchedulePage(mStation[name], name)} >{name}</p>);\n    });\n\n    return (<><>{options_p_Arr}</></>);\n};\n\nconst setGeoLocationPermission = () => {\n    // navigator.geolocation.getCurrentPosition(position => {\n    //     globalLat = position.coords.latitude;\n    //     globalLon = position.coords.longitude;\n    //     locationPermission = true;\n    //     getClosestStation(globalLat, globalLon);\n    //     let lenny = options[0].childElementCount;\n    //     for(let incre=0; incre<lenny; incre++){\n    //         options[0].appendChild(document.getElementById(d_arr[d_arr_cop[incre]]));\n    //     }\n    // });\n};\n\nconst Options = (props) => {\n    const urlParams = new URLSearchParams(window.location.search);\n    let options = (\n            <>\n            <div className=\"options\">\n            <LoadMainPage line={urlParams.get('line')} />\n            </div>\n            </>\n        );\n    if(urlParams.get(\"selectLines\") === \"t\"){\n        options = (\n            <div className=\"options\">\n                <GetClosestStation />\n            </div>\n        );\n    }\n    return options;\n};\n\nexport default Options;"],"mappings":"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"},"metadata":{},"sourceType":"module"}