{"ast":null,"code":"var _jsxFileName = \"/Users/gyume/mtatib/react/mtatib-react/src/Options.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { options } from \"nodemon/lib/config\";\nimport React from \"react\"; // import \"./tibDB\"\n\nimport { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst locationPermission = false;\nlet globalLat, globalLon;\nconst stopIds = [];\nlet mStation = {};\nlet currentStation = '';\n/**\n * \n * // locDBArr <- get this from the console log from where we get to know what name for locDb[name] went wrong\n// collectorArr <- get this from network tab collector-otp... aka url is requested to https://collector-otp-prod.camsys-apps.com/schedule/MTASBWY/stopsForRoute?apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP&&routeId=MTASBWY:${line}`\nit = 0; v ='';\nfor(i in locDBArr){\n    console.log(`\"${collectorArr[it].stopName}\": [${locDBArr[i]}]`, collectorArr[it].stopName, i);\n    it++;\n} //here confirm that the indexing order of these two arr are the same\n\nit = 0; v ='';\nfor(i in locDBArr){\n    v += `\"${collectorArr[it].stopName}\": [${locDBArr[i]}],\\n`;\n    it++;\n}\n */\n\nlet disabled_ids = [];\nexport const back = () => {\n  document.getElementById(\"back\").style.display = 'none';\n  console.log(currentStation);\n  currentStation.style.display = 'none';\n  let options = document.querySelector(\".options\").children;\n\n  for (let i = 0; i < options.length; i++) options[i].style.display = 'block'; //document.querySelector('img[onclick=\"playnavigation()\"]').style.display = '';\n  //document.querySelector('img[onclick=\"playnavigation()\"]').style.animation = '';\n\n\n  while (disabled_ids.length != 0) {\n    document.getElementById(disabled_ids.pop()).style.display = \"block\";\n  }\n};\n\nfunction GetClosestStation(props) {\n  _s();\n\n  const [allLocs, setAllLocs] = useState([]);\n  const [allLines, setAllLines] = useState([]);\n  const [allBusLocs, setAllBusLocs] = useState([]); // const [options_p_Arr, setOptions_p_Arr] = useState([]);\n\n  let home_lat = 40.73671957818318,\n      home_lon = -73.87569054132567;\n  useEffect(() => {\n    (async () => {\n      let x = await fetch(\"https://gyurmay.github.io/mtatib/locDb2/allLocs.json\");\n      let allLocs1 = await x.json();\n      setAllLocs(allLocs1);\n      x = await fetch(\"https://gyurmay.github.io/mtatib/locDb2/allLines.json\");\n      let allLines1 = await x.json();\n      setAllLines(allLines1);\n      x = await fetch(\"https://gyurmay.github.io/mtatib/locDb2/allLocsBus.json\");\n      let allLocs2 = await x.json();\n      setAllBusLocs(allLocs2);\n    })();\n  }, []);\n  useEffect(() => {\n    let [lat, lon] = [40.6980331, -73.806328]; // let lat=40.6980331 lon=-73.806328;\n\n    let myloc = [];\n    myloc[0] = lat;\n    console.log(lat);\n    myloc[1] = lon;\n    let num = allLocs; // store [lat,lon] for all given\n\n    let d_arr = {}; // stationName/ p[id]\n\n    let d_arr_cop = []; //distances\n\n    let j;\n\n    for (j = 0; j < allLocs.length; j++) {\n      //logging the distances of the stations with increment j for objects\n      let distance = Math.sqrt((num[j][\"loc\"][0] - myloc[0]) * (num[j][\"loc\"][0] - myloc[0]) + (num[j][\"loc\"][1] - myloc[1]) * (num[j][\"loc\"][1] - myloc[1]));\n      console.log(\"from home to \" + num[j].name + \". distance: \" + distance);\n      d_arr[distance] = num[j].name; //input distance get the station Id\n\n      d_arr_cop[j] = distance;\n    }\n\n    let num2 = allBusLocs;\n\n    for (let k = 0; k < allBusLocs.length; k++) {\n      for (j = 0; j < allBusLocs[k].length; j++) {\n        // logging the distances of the bus Stations with increment j for objects\n        let distance = Math.sqrt((num2[k][j][\"lat\"] - myloc[0]) * (num2[k][j][\"lat\"] - myloc[0]) + (num2[k][j][\"lon\"] - myloc[1]) * (num2[k][j][\"lon\"] - myloc[1]));\n        console.log(\"from home to \" + num2[k][j].name + \". distance: \" + distance);\n        d_arr[distance] = num2[k][j].name; // input distance get the station Id\n\n        d_arr_cop[j] = distance;\n        mStation[num2[k][j].name] = num2[k][j].id;\n      }\n    }\n\n    console.log(\"Before sorting\", d_arr_cop);\n    d_arr_cop.sort();\n    d_arr_cop = [...new Set(d_arr_cop)]; // console.log(\"After insertion\", d_arr_cop);\n    // new Promise((resolve) => setTimeout(resolve, 500));\n    // setTimeout(() => {\n\n    let options_p_Arr = []; // let it=0;\n    // d_arr_cop.forEach(x => {\n\n    let x;\n    let numOptions = 10; // how many stations stops do we want to show?\n\n    for (let i = 0; i < numOptions; i++) {\n      x = d_arr_cop[i];\n      let name = d_arr[x]; // console.log(\"ballll\",d_arr_cop, i, d_arr[x], \"--\", x)\n\n      console.log(\"closest\", d_arr[d_arr_cop[0]]);\n      let line; // let line = (allLines.find(x => x.stopName === name) !== undefined ? 'UN' : allLines.find(x => x.stopName === name).routeId.slice(-1));\n\n      let xaFound = false;\n\n      for (let j = 0; j < allLines.length; j++) {\n        x = allLines[j];\n        let xa = x.find(y => y.stopName === name);\n        x.forEach(y => {\n          mStation[y.stopName] = y.stopId;\n        });\n\n        if (xa !== undefined && !xaFound) {\n          line = xa.routeId.slice(-1);\n          xaFound = true;\n        }\n      }\n\n      if (!xaFound) {\n        let a = allBusLocs;\n        let lines = [];\n\n        for (let k = 0; k < a.length; k++) {\n          let xa = a[k].findIndex(y => y.name === name);\n          console.log(\"xa\", xa);\n\n          if (xa !== -1) {\n            a[k][xa].routes.forEach(y => {\n              line = y.id.includes(\"NYCT\") ? y.shortName : '';\n\n              if (line !== '') {\n                console.log(\"the lineName/busName found::\", line);\n                lines.push(line);\n              } else {\n                console.log(\"bus isn't NYCT bus\");\n              }\n            });\n          }\n        }\n\n        line = lines.join(\" | \");\n      } // for(let j=0;j<num2.length;j++){\n      //     x = allLines[j];\n      //     let xa = x.find(y => y.stopName === name);\n      //     x.forEach(y => { \n      //         mStation[y.stopName] = y.stopId; \n      //     })\n      // }\n      // console.log(JSON.stringify())\n\n\n      let img;\n\n      if (line.length > 1 || line === undefined) {\n        img = line;\n      } else {\n        img = /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"https://new.mta.info/themes/custom/bootstrap_mta/images/icons/\" + line + \".svg\",\n          style: {\n            height: '1em',\n            padding: '1px 0 2px 3px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 24\n        }, this);\n      } // img = (<img src={\"https://new.mta.info/themes/custom/bootstrap_mta/images/icons/\"+line+\".svg\"} style={{height:'1em', padding:'1px 0 2px 3px'}} />);\n\n\n      options_p_Arr.push( /*#__PURE__*/_jsxDEV(\"p\", {\n        id: name,\n        style: {\n          display: 'flex',\n          alignItems: 'center'\n        },\n        onClick: () => loadSchedulePage(mStation[name], name),\n        children: [img, name]\n      }, name, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 13\n      }, this));\n    }\n\n    ;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: options_p_Arr\n    }, void 0, false); // }, 1000); //wait one sec for sort() function to take place\n    // })();\n    // }, []);\n  }, []);\n}\n\n_s(GetClosestStation, \"xhBPYzaqx9O3hZ30wmJwSN0CgWo=\");\n\n_c = GetClosestStation;\n\nconst tibetanName = engName => {\n  return engName;\n};\n\nconst schedulevisible = stationName => {\n  let id = stationName;\n  console.log(\"times is w/ id:\" + id);\n  let times = document.getElementById(id);\n  currentStation = times;\n  times.style.display = 'block';\n  let options = document.querySelector(\".options\").children;\n\n  for (let i = 0; i < options.length; i++) options[i].style.display = 'none';\n\n  document.getElementById(\"back\").style.display = 'block'; //document.querySelector('img[onclick=\"playnavigation()\"]').style.display = 'none';\n  // navigation.pause();\n  // navigation.currentTime = 0;\n};\n\nconst loadSchedulePage = (line, name) => {\n  // const [jsonResp, setJsonResp] = useState([]); \n  console.log(\"mStation\", mStation);\n  let url = `https://otp-mta-prod.camsys-apps.com/otp/routers/default/nearby?stops=${line}&apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE`;\n  let jr = []; // jsonResponse\n\n  (async () => {\n    const resp = await fetch(url);\n    const data = await resp.json();\n    jr = data[0]; // prompt(\"\",JSON.stringify(jr));\n\n    if (document.getElementById(name + '-time') != null) document.getElementById(name + '-time').remove(); //remove old -time if exist\n\n    let stations = document.createElement('p'); //select divId(<p></p>) box\n\n    stations.style.display = 'none';\n    let stationName = document.createElement('div');\n    stationName.innerHTML += '<b>' + name + '</b><br/><br/>';\n    stations.append(stationName);\n    stations.id = name + '-time'; // stations.innerHTML += `<button id=\"go\" style=\"position: relative;padding: 2em;font-size: 50%;left: 27%;background: teal;color: #fff; bottom: 1em;border: 5px solid white;border-radius: 7%;box-shadow: 4px 3px 0.5em black;\">Go Here</button>`;\n    //showTrainTimes();\n\n    let table = document.createElement('table');\n    table.id = \"times\";\n    let shortNames = [],\n        headsigns = [],\n        arrivalTimes = [];\n\n    for (let i = 0; i < jr['groups'].length; i++) {\n      //loop over each route (train Lines)\n      shortNames[i] = jr['groups'][i]['route']['shortName'];\n      headsigns[i] = jr['groups'][i]['headsign'];\n      let numberOfTrains = jr['groups'][i]['times'].length;\n\n      for (let j = 0; j < numberOfTrains; j++) {\n        //get arrival times rows\n        let tr = document.createElement('tr');\n        table.appendChild(tr);\n        tr.innerHTML += `<td><img src='https://new.mta.info/themes/custom/bootstrap_mta/images/icons/${shortNames[i]}.svg'></td>`;\n        tr.innerHTML += '<td>' + tibetanName(headsigns[i]) + '</td>'; //Print HeadSigns (which side is it going)\n\n        let d = new Date(jr['groups'][i]['times'][j]['arrivalFmt']);\n        let h = d.getHours() > 12 ? d.getHours() - 12 : d.getHours();\n        if (h == 0) h = 12;\n        let amPm = d.getHours() > 12 ? 'PM' : 'AM';\n        arrivalTimes[j] = h + ':' + d.getMinutes() + amPm;\n        console.log(\"(new Date()).getHours(): \" + new Date().getHours() + \" > d.getHours(): \" + d.getHours());\n        tr.innerHTML += `<td style='font-size:60%;'>${new Date().getHours() == d.getHours() ? d.getMinutes() - new Date().getMinutes() : 60 - new Date().getMinutes() + d.getMinutes()} min</td>`;\n      }\n\n      document.body.appendChild(stations);\n    }\n\n    stations.appendChild(table);\n    document.getElementById(\"load_icon\").style.display = \"none\";\n    schedulevisible(name + \"-time\");\n  })();\n\n  document.getElementById(\"load_icon\").style.display = \"block\";\n};\n\nconst LoadMainPage = props => {\n  _s2();\n\n  // document.querySelector('#loadLocDb').src = \"https://gyurmay.github.io/mtatib/locDb2/\" + (new URLSearchParams(window.location.search).get('line')) + \".js\";\n  const line = props.line;\n  let url = `https://collector-otp-prod.camsys-apps.com/schedule/MTASBWY/stopsForRoute?apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP&&routeId=MTASBWY:${line}`;\n  const [jsonResp, setJsonResp] = useState([]);\n  const [locDb, setLocDb] = useState([]); // const [lat, setLat] = useState();\n  // const [lon, setLon] = useState();\n  // const [mStation, setmStation] = useState({});\n\n  const options_p_Arr = [];\n  useEffect(() => {\n    (async () => {\n      let url2 = \"https://gyurmay.github.io/mtatib/locDb2/\" + new URLSearchParams(document.location.search).get('line') + \".json\"; // let url2 = \"/R.json\";\n\n      const locResp = await fetch(url2);\n      const locData = await locResp.json();\n      setLocDb(locData); // document.write(JSON.stringify(locData))\n\n      const resp = await fetch(url); //Whitehall here but in Loc2DB its \"whitehall st - somthing\".. so making a include instead\n\n      const data = await resp.json();\n      setJsonResp(data);\n      setGeoLocationPermission();\n    })();\n  }, []);\n  jsonResp.forEach(i => {\n    let name = i.stopName; // setLat(locDb); \n    // setLon(locDb[name][1]);\n\n    console.log(JSON.stringify(locDb)); //   setmStation(arr => [...arr, \"\"]);\n\n    mStation[name] = i[\"stopId\"];\n    console.log(`name no work for ${name}`);\n    console.log(`Inserting ${name} with longitude: ${locDb[name][0]}`); //   if(name.includes(\"Center\")) name.replace(/Center/g,\"Ctr\");\n\n    options_p_Arr.push( /*#__PURE__*/_jsxDEV(\"p\", {\n      id: name,\n      lon: locDb[name][0],\n      lat: locDb[name][1],\n      onClick: () => loadSchedulePage(mStation[name], name),\n      children: name\n    }, name, false, {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 26\n    }, this));\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: options_p_Arr\n    }, void 0, false)\n  }, void 0, false);\n};\n\n_s2(LoadMainPage, \"Q/LJxDFPXbNcKQakgD3Mz35fY0g=\");\n\n_c2 = LoadMainPage;\n\nconst setGeoLocationPermission = () => {// navigator.geolocation.getCurrentPosition(position => {\n  //     globalLat = position.coords.latitude;\n  //     globalLon = position.coords.longitude;\n  //     locationPermission = true;\n  //     getClosestStation(globalLat, globalLon);\n  //     let lenny = options[0].childElementCount;\n  //     for(let incre=0; incre<lenny; incre++){\n  //         options[0].appendChild(document.getElementById(d_arr[d_arr_cop[incre]]));\n  //     }\n  // });\n};\n\nconst Options = props => {\n  const urlParams = new URLSearchParams(window.location.search);\n\n  let options = /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"options\",\n      children: /*#__PURE__*/_jsxDEV(LoadMainPage, {\n        line: urlParams.get('line')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n\n  if (urlParams.get(\"selectLines\") === \"t\") {\n    options = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"options\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 13\n    }, this);\n  }\n\n  return options;\n};\n\n_c3 = Options;\nexport default Options;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"GetClosestStation\");\n$RefreshReg$(_c2, \"LoadMainPage\");\n$RefreshReg$(_c3, \"Options\");","map":{"version":3,"names":["options","React","useState","useEffect","locationPermission","globalLat","globalLon","stopIds","mStation","currentStation","disabled_ids","back","document","getElementById","style","display","console","log","querySelector","children","i","length","pop","GetClosestStation","props","allLocs","setAllLocs","allLines","setAllLines","allBusLocs","setAllBusLocs","home_lat","home_lon","x","fetch","allLocs1","json","allLines1","allLocs2","lat","lon","myloc","num","d_arr","d_arr_cop","j","distance","Math","sqrt","name","num2","k","id","sort","Set","options_p_Arr","numOptions","line","xaFound","xa","find","y","stopName","forEach","stopId","undefined","routeId","slice","a","lines","findIndex","routes","includes","shortName","push","join","img","height","padding","alignItems","loadSchedulePage","tibetanName","engName","schedulevisible","stationName","times","url","jr","resp","data","remove","stations","createElement","innerHTML","append","table","shortNames","headsigns","arrivalTimes","numberOfTrains","tr","appendChild","d","Date","h","getHours","amPm","getMinutes","body","LoadMainPage","jsonResp","setJsonResp","locDb","setLocDb","url2","URLSearchParams","location","search","get","locResp","locData","setGeoLocationPermission","JSON","stringify","Options","urlParams","window"],"sources":["/Users/gyume/mtatib/react/mtatib-react/src/Options.js"],"sourcesContent":["import { options } from \"nodemon/lib/config\";\nimport React from \"react\"\n// import \"./tibDB\"\nimport {useState, useEffect} from \"react\"\n\nconst locationPermission = false;\nlet globalLat, globalLon;\nconst stopIds = [];\nlet mStation = {};\nlet currentStation = '';\n\n/**\n * \n * // locDBArr <- get this from the console log from where we get to know what name for locDb[name] went wrong\n// collectorArr <- get this from network tab collector-otp... aka url is requested to https://collector-otp-prod.camsys-apps.com/schedule/MTASBWY/stopsForRoute?apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP&&routeId=MTASBWY:${line}`\nit = 0; v ='';\nfor(i in locDBArr){\n    console.log(`\"${collectorArr[it].stopName}\": [${locDBArr[i]}]`, collectorArr[it].stopName, i);\n    it++;\n} //here confirm that the indexing order of these two arr are the same\n\nit = 0; v ='';\nfor(i in locDBArr){\n    v += `\"${collectorArr[it].stopName}\": [${locDBArr[i]}],\\n`;\n    it++;\n}\n */\n\nlet disabled_ids = [];\nexport const back = () => {\n    document.getElementById(\"back\").style.display = 'none';\n    console.log(currentStation)\n    currentStation.style.display = 'none';\n    let options = document.querySelector(\".options\").children;\n    for(let i=0;i<options.length;i++)\n        options[i].style.display = 'block';\n    //document.querySelector('img[onclick=\"playnavigation()\"]').style.display = '';\n    //document.querySelector('img[onclick=\"playnavigation()\"]').style.animation = '';\n  \n    while(disabled_ids.length != 0){\n        document.getElementById(disabled_ids.pop()).style.display = \"block\";\n    }\n}\n\nfunction GetClosestStation(props){\n    const [allLocs, setAllLocs] = useState([]);\n    const [allLines, setAllLines] = useState([]);\n    const [allBusLocs, setAllBusLocs] = useState([]);\n    // const [options_p_Arr, setOptions_p_Arr] = useState([]);\n    \n    let home_lat = 40.73671957818318, home_lon = -73.87569054132567;\n\n    useEffect(() => {\n        (async() => {\n\n            let x = await fetch(\"https://gyurmay.github.io/mtatib/locDb2/allLocs.json\");\n            let allLocs1 = (await x.json());\n            setAllLocs(allLocs1);\n\n            x = await fetch(\"https://gyurmay.github.io/mtatib/locDb2/allLines.json\");\n            let allLines1 = (await x.json());\n            setAllLines(allLines1);\n\n            x = await fetch(\"https://gyurmay.github.io/mtatib/locDb2/allLocsBus.json\");\n            let allLocs2 = (await x.json());\n            setAllBusLocs(allLocs2);\n            \n        })();\n    }, []);\n\nuseEffect(() => {\n    let [lat, lon] = [40.6980331, -73.806328];\n    // let lat=40.6980331 lon=-73.806328;\n    let myloc = [];\n    myloc[0] = lat; console.log(lat);\n    myloc[1] = lon;\n    let num = allLocs; // store [lat,lon] for all given\n\n    let d_arr = {}; // stationName/ p[id]\n    let d_arr_cop = []; //distances\n    let j;\n    \n    for(j=0;j<allLocs.length;j++){ //logging the distances of the stations with increment j for objects\n        let distance = Math.sqrt((((num[j][\"loc\"][0] - myloc[0])*(num[j][\"loc\"][0] - myloc[0])) + (num[j][\"loc\"][1] - myloc[1])*(num[j][\"loc\"][1] - myloc[1])));\n        console.log(\"from home to \"+ num[j].name + \". distance: \"+distance);\n        d_arr[distance] = num[j].name; //input distance get the station Id\n        d_arr_cop[j] = distance;\n    }\n\n    let num2 = allBusLocs;\n    for(let k=0;k<allBusLocs.length;k++){\n        for(j=0;j<allBusLocs[k].length;j++){ // logging the distances of the bus Stations with increment j for objects\n            let distance = Math.sqrt((((num2[k][j][\"lat\"] - myloc[0])*(num2[k][j][\"lat\"] - myloc[0])) + (num2[k][j][\"lon\"] - myloc[1])*(num2[k][j][\"lon\"] - myloc[1])));\n            console.log(\"from home to \"+ num2[k][j].name + \". distance: \"+distance);\n            d_arr[distance] = num2[k][j].name; // input distance get the station Id\n            d_arr_cop[j] = distance;\n            mStation[num2[k][j].name] = num2[k][j].id;\n        }\n    }\n    \n    console.log(\"Before sorting\", d_arr_cop);\n    d_arr_cop.sort();\n    d_arr_cop = [...new Set(d_arr_cop)];\n    // console.log(\"After insertion\", d_arr_cop);\n    // new Promise((resolve) => setTimeout(resolve, 500));\n    // setTimeout(() => {\n        let options_p_Arr = [];\n        // let it=0;\n        // d_arr_cop.forEach(x => {\n        let x;\n        let numOptions = 10; // how many stations stops do we want to show?\n        for(let i=0;i<numOptions; i++){ \n            x = d_arr_cop[i];  \n            let name = d_arr[x];\n            // console.log(\"ballll\",d_arr_cop, i, d_arr[x], \"--\", x)\n            console.log(\"closest\", d_arr[d_arr_cop[0]]);\n            let line;\n            // let line = (allLines.find(x => x.stopName === name) !== undefined ? 'UN' : allLines.find(x => x.stopName === name).routeId.slice(-1));\n            let xaFound = false;\n            for(let j=0;j<allLines.length;j++){\n                x = allLines[j];\n                let xa = x.find(y => y.stopName === name);\n                x.forEach(y => { \n                    mStation[y.stopName] = y.stopId;\n                })\n                if(xa !== undefined && !xaFound){\n                    line = xa.routeId.slice(-1);\n                    xaFound = true;\n                }\n            }\n            if(!xaFound){\n                let a = allBusLocs;\n                let lines = [];\n                for(let k=0;k<a.length;k++){\n                    let xa = a[k].findIndex(y => y.name === name);\n                    console.log(\"xa\", xa);\n                    if(xa !== -1){\n                        a[k][xa].routes.forEach(y => {\n                                line = y.id.includes(\"NYCT\") ? y.shortName : '';\n                                if(line !== ''){\n                                    console.log(\"the lineName/busName found::\", line);\n                                    lines.push(line);\n                                }else{ console.log(\"bus isn't NYCT bus\")}\n                            });\n                    }\n                }\n                line = lines.join(\" | \");\n            }\n\n            // for(let j=0;j<num2.length;j++){\n            //     x = allLines[j];\n            //     let xa = x.find(y => y.stopName === name);\n            //     x.forEach(y => { \n            //         mStation[y.stopName] = y.stopId; \n            //     })\n                \n            // }\n\n            // console.log(JSON.stringify())\n            let img;\n            if(line.length > 1 || line === undefined){\n                img = line;\n            }else{\n                img = (<img src={\"https://new.mta.info/themes/custom/bootstrap_mta/images/icons/\"+line+\".svg\"} style={{height:'1em', padding:'1px 0 2px 3px'}} />);\n            }\n            // img = (<img src={\"https://new.mta.info/themes/custom/bootstrap_mta/images/icons/\"+line+\".svg\"} style={{height:'1em', padding:'1px 0 2px 3px'}} />);\n            options_p_Arr.push(\n            <p id={name} style={{display:'flex', alignItems:'center'}} key={name} onClick={() => loadSchedulePage(mStation[name], name)}>\n                {img}\n                {name}\n            </p>);\n        };\n        return (<>{options_p_Arr}</>);\n            // }, 1000); //wait one sec for sort() function to take place\n        // })();\n    // }, []);\n    }, []);\n}\n\nconst tibetanName = (engName) => {\n    return engName;\n};\nconst schedulevisible = (stationName) => {\n    let id = stationName;\n    console.log(\"times is w/ id:\" + id);\n    let times = document.getElementById(id);\n    currentStation = times;\n    times.style.display = 'block';\n    let options = document.querySelector(\".options\").children;\n    for(let i=0;i<options.length;i++)\n        options[i].style.display = 'none';\n    document.getElementById(\"back\").style.display = 'block';\n    //document.querySelector('img[onclick=\"playnavigation()\"]').style.display = 'none';\n    // navigation.pause();\n    // navigation.currentTime = 0;\n}\nconst loadSchedulePage = (line, name) => {\n    // const [jsonResp, setJsonResp] = useState([]); \n    console.log(\"mStation\", mStation);\n    let url = `https://otp-mta-prod.camsys-apps.com/otp/routers/default/nearby?stops=${line}&apikey=Z276E3rCeTzOQEoBPPN4JCEc6GfvdnYE`;\n    let jr = []; // jsonResponse\n\n    (async () => {\n        const resp = await fetch(url);\n        const data = await resp.json();\n        jr = data[0];\n        // prompt(\"\",JSON.stringify(jr));\n        \n        if(document.getElementById(name+'-time') != null) document.getElementById(name+'-time').remove(); //remove old -time if exist\n        let stations = document.createElement('p'); //select divId(<p></p>) box\n        stations.style.display = 'none';\n        let stationName = document.createElement('div');\n        stationName.innerHTML += '<b>'+name+'</b><br/><br/>';\n        stations.append(stationName);\n        stations.id = name+'-time';\n        // stations.innerHTML += `<button id=\"go\" style=\"position: relative;padding: 2em;font-size: 50%;left: 27%;background: teal;color: #fff; bottom: 1em;border: 5px solid white;border-radius: 7%;box-shadow: 4px 3px 0.5em black;\">Go Here</button>`;\n        //showTrainTimes();\n        let table = document.createElement('table');\n        table.id = \"times\";\n        let shortNames = [], headsigns = [], arrivalTimes = [];\n        \n        for(let i=0; i<jr['groups'].length; i++){ //loop over each route (train Lines)\n            shortNames[i] = jr['groups'][i]['route']['shortName'];\n            headsigns[i] = jr['groups'][i]['headsign'];\n            let numberOfTrains = jr['groups'][i]['times'].length;\n            for(let j=0; j<numberOfTrains; j++){ //get arrival times rows\n                let tr = document.createElement('tr');\n                table.appendChild(tr);\n                tr.innerHTML += (`<td><img src='https://new.mta.info/themes/custom/bootstrap_mta/images/icons/${shortNames[i]}.svg'></td>`);\n                tr.innerHTML += '<td>'+tibetanName(headsigns[i])+'</td>'; //Print HeadSigns (which side is it going)\n                let d = new Date(jr['groups'][i]['times'][j]['arrivalFmt']);\n                let h = (d.getHours() > 12) ?  d.getHours() - 12 : d.getHours();\n                if(h == 0) h = 12;\n                let amPm = (d.getHours() > 12) ? 'PM' : 'AM';\n                arrivalTimes[j] =  h+':'+d.getMinutes()+amPm;\n                console.log(\"(new Date()).getHours(): \" + (new Date()).getHours() + \" > d.getHours(): \" + d.getHours());\n                tr.innerHTML += (`<td style='font-size:60%;'>${((new Date()).getHours() == (d.getHours())) ? (d.getMinutes() - (new Date()).getMinutes()) : ( (60 - (new Date()).getMinutes()) + d.getMinutes() ) } min</td>`);\n            }\n\n        document.body.appendChild(stations);\n        }\n        stations.appendChild(table);\n        document.getElementById(\"load_icon\").style.display = \"none\";\n        schedulevisible(name+\"-time\");\n\n    })();\n\n    document.getElementById(\"load_icon\").style.display = \"block\";\n}\n\nconst LoadMainPage = props => {\n    // document.querySelector('#loadLocDb').src = \"https://gyurmay.github.io/mtatib/locDb2/\" + (new URLSearchParams(window.location.search).get('line')) + \".js\";\n    const line = props.line;\n    let url = `https://collector-otp-prod.camsys-apps.com/schedule/MTASBWY/stopsForRoute?apikey=qeqy84JE7hUKfaI0Lxm2Ttcm6ZA0bYrP&&routeId=MTASBWY:${line}`;\n    \n    const [jsonResp, setJsonResp] = useState([]);\n    const [locDb, setLocDb] = useState([]);\n    // const [lat, setLat] = useState();\n    // const [lon, setLon] = useState();\n    // const [mStation, setmStation] = useState({});\n\n    const options_p_Arr = [];\n    useEffect(() => {\n        (async () => {\n            let url2 = \"https://gyurmay.github.io/mtatib/locDb2/\" + (new URLSearchParams(document.location.search).get('line')) + \".json\";\n            // let url2 = \"/R.json\";\n            const locResp = await fetch(url2);\n            const locData = await locResp.json();\n            setLocDb(locData);\n            // document.write(JSON.stringify(locData))\n\n            const resp = await fetch(url); //Whitehall here but in Loc2DB its \"whitehall st - somthing\".. so making a include instead\n            const data = await resp.json();\n            setJsonResp(data);\n\n            setGeoLocationPermission();\n        })();\n    }, []);\n    jsonResp.forEach(i => {\n      let name = i.stopName;\n      // setLat(locDb); \n      // setLon(locDb[name][1]);\n      console.log(JSON.stringify(locDb))\n    //   setmStation(arr => [...arr, \"\"]);\n      mStation[name] = i[\"stopId\"];\n      console.log(`name no work for ${name}`)\n      console.log(`Inserting ${name} with longitude: ${locDb[name][0]}`);\n    //   if(name.includes(\"Center\")) name.replace(/Center/g,\"Ctr\");\n      options_p_Arr.push(<p id={name} lon={locDb[name][0]} lat={locDb[name][1]} key={name} onClick={() => loadSchedulePage(mStation[name], name)} >{name}</p>);\n    });\n\n    return (<><>{options_p_Arr}</></>);\n};\n\nconst setGeoLocationPermission = () => {\n    // navigator.geolocation.getCurrentPosition(position => {\n    //     globalLat = position.coords.latitude;\n    //     globalLon = position.coords.longitude;\n    //     locationPermission = true;\n    //     getClosestStation(globalLat, globalLon);\n    //     let lenny = options[0].childElementCount;\n    //     for(let incre=0; incre<lenny; incre++){\n    //         options[0].appendChild(document.getElementById(d_arr[d_arr_cop[incre]]));\n    //     }\n    // });\n};\n\nconst Options = (props) => {\n    const urlParams = new URLSearchParams(window.location.search);\n    let options = (\n            <>\n            <div className=\"options\">\n            <LoadMainPage line={urlParams.get('line')} />\n            </div>\n            </>\n        );\n    if(urlParams.get(\"selectLines\") === \"t\"){\n        options = (\n            <div className=\"options\">\n                {/* <GetClosestStation /> */}\n            </div>\n        );\n    }\n    return options;\n};\n\nexport default Options;"],"mappings":"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"},"metadata":{},"sourceType":"module"}